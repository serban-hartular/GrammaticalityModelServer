<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Sentence Checker</title>
  <script src="https://unpkg.com/htmx.org@1.9.12"></script>
<!--  <script src="https://unpkg.com/htmx.org/dist/ext/json-enc.js"></script>-->
  <style>
    body { font-family: Arial, sans-serif; margin: 2rem; }
    textarea { width: 100%; height: 120px; }
    table { border-collapse: collapse; width: 100%; margin-top: 1rem; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
    th { background: #f5f5f5; }
    .correct { color: green; font-weight: bold; }
    .incorrect { color: red; font-weight: bold; }
    button { padding: 0.5rem 1rem; margin-top: 1rem; }

    /* overlay covers the whole screen */
    #processing-overlay {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.5);
      display: none;            /* hidden by default */
      align-items: center;
      justify-content: center;
      z-index: 9999;
      color: white;
      font-size: 1.5rem;
    }
    #processing-box {
      background: #333;
      padding: 2rem;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.7);
    }
  </style>
</head>


<body>

<!-- Hidden processing dialog -->
<div id="processing-overlay">
  <div id="processing-box">Processing requestâ€¦ Please wait.</div>
</div>

<div id="main">
  <!-- Initial input form -->
  <form hx-post="/check"
        hx-trigger="submit"
        hx-target="#main"
        hx-swap="innerHTML">
    <label for="sentences">Enter your sentences:</label><br>
    <textarea name="sentences" id="sentences"></textarea><br>
    <button type="submit">Submit</button>
  </form>
</div>

<script>
  // Show overlay before request
  document.body.addEventListener('htmx:beforeRequest', function (evt) {
    document.getElementById('processing-overlay').style.display = 'flex';
  });
  // Hide overlay when response arrives or on error
  document.body.addEventListener('htmx:afterRequest', function (evt) {
    document.getElementById('processing-overlay').style.display = 'none';
  });
  document.body.addEventListener('htmx:responseError', function (evt) {
    document.getElementById('processing-overlay').style.display = 'none';
  });
</script>


<script>
/**
 * Example of how your backend could respond:
 * [
 *   { input: "This is correct.", correct: true, corrected: "This is correct." },
 *   { input: "He go to school.", correct: false, corrected: "He goes to school." }
 * ]
 *
 * The server would render an HTML fragment like below using the JSON data.
 */
</script>

</body>
</html>
